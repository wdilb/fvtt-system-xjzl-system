/* styles/components/_forms.css */

/* 基础结构：所有系统内的文本域都共用这套尺寸和圆角 */
/* 通用文本域结构基类 */
.xjzl-textarea-base {
  display: block;
  width: 100%;
  padding: 12px;
  font-family: inherit;
  font-size: 1rem;
  line-height: 1.5;
  resize: vertical;
  min-height: 100px;
  box-sizing: border-box;
  border-radius: 4px;
  transition: all 0.2s ease;
}

/* 通用输入框样式 */
.xjzl-window .xjzl-input {
  background: rgba(255, 255, 255, 0.5);
  /* 半透明白底 */
  border: none;
  border-bottom: 2px solid var(--xjzl-ink-500);
  border-radius: 2px;
  font-family: inherit;
  color: #000000 !important;
  /* 纯黑 */
  font-weight: bold;
  font-size: 15px;
  text-align: center;
  height: 26px;
  padding: 0 4px;
  transition: all 0.2s;
}

/* 聚焦时的高亮 */
.xjzl-window .xjzl-input:focus {
  outline: none;
  background: rgba(255, 255, 255, 0.9);
  border-bottom: 2px solid var(--xjzl-accent);
}

/* 禁用/只读状态 */
.xjzl-window .xjzl-input:disabled,
.xjzl-window .xjzl-input[readonly] {
  background: transparent;
  border-bottom: 1px dotted #555;
  /* 深灰色虚线 */
  color: #333 !important;
  /* 深灰色文字 */
}

/* 占位符颜色 (Placeholder) */
.xjzl-window .xjzl-input::placeholder {
  color: rgba(0, 0, 0, 0.4);
}

/* === 按钮样式修复 === */
/* 之前这里写了全局 button，导致侧边栏图标崩坏。现在加上前缀 */
.xjzl-window form button {
  cursor: pointer;
  background: var(--xjzl-ink-800);
  color: var(--xjzl-paper);
  border: 1px solid var(--xjzl-ink-900);
  padding: 4px 12px;
  border-radius: 4px;
  font-family: inherit;
  line-height: normal;
  font-size: 14px;
}

.xjzl-window form button:hover {
  background: var(--xjzl-ink-500);
  color: #fff;
  box-shadow: 0 0 5px var(--xjzl-gold);
}

.xjzl-window form button i {
  margin-right: 4px;
}

/* 统一的标题输入框（去掉边框和背景，只留文字） */
.xjzl-input-title {
  background: transparent !important;
  border: none !important;
  border-bottom: 1px dashed transparent !important;
  font-size: 1.5rem !important;
  font-weight: bold;
  color: var(--xjzl-ink-900);
  transition: border-bottom 0.2s;
}

.xjzl-input-title:focus {
  border-bottom-color: var(--xjzl-gold-accent) !important;
}

/* 统一的标签样式 */
.xjzl-tag {
  display: inline-flex !important;
  /* 强制不占据整行 */
  align-items: center;
  justify-content: center;
  width: auto !important;
  max-width: fit-content;
  white-space: nowrap;
  /* 强制文字不换行 */
  padding: 2px 10px;
  font-size: 0.75rem;
  border-radius: 2px;
  gap: 4px;
  height: 24px;
}

/* ========================================== */
/* V13 ProseMirror 组件                       */
/* ========================================== */

/* 1. 组件容器：强制垂直 Flex 布局 */
/* 加上 .xjzl-window 前缀，防止污染核心 AE 弹窗 */
.xjzl-window prose-mirror {
  display: flex !important;
  /* 开启 Flex */
  flex-direction: column !important;
  /* 垂直排列：上菜单，下内容 */
  min-height: 300px !important;
  /* 给足总高度 */
  background: #fff !important;
  /* 整体白底 */
  border: 1px solid #8b7d6b !important;
  border-radius: 4px;
  padding: 0 !important;
  /* 清除内边距，让菜单贴边 */
  position: relative;
  overflow: hidden;
  /* 防止圆角溢出 */
}

/* 2. 菜单栏：固定头部，不许动 */
.xjzl-window prose-mirror .editor-menu {
  flex: 0 0 auto !important;
  /* 不拉伸，高度自适应内容 */
  position: relative !important;
  /* 回归文档流，不要 absolute */
  width: 100%;
  background: #2c2c2c !important;
  /* 默认深灰 */
  color: #eee !important;
  border-bottom: 1px solid #ccc;
  padding: 5px !important;
  margin: 0 !important;
  display: flex;
  flex-wrap: wrap;
  gap: 5px;
  z-index: 2;
  /* 确保在内容之上 */
}

/* 菜单按钮样式 */
.xjzl-window prose-mirror .editor-menu button {
  background: transparent;
  border: none;
  color: #ccc;
  cursor: pointer;
  padding: 4px;
  border-radius: 2px;
}

.xjzl-window prose-mirror .editor-menu button:hover {
  color: #fff;
  background: rgba(255, 255, 255, 0.1);
}

/* 3. 内容容器：自动填充剩余空间 */
.xjzl-window prose-mirror .editor-container {
  flex: 1 1 auto !important;
  /* 占据剩下的所有高度 */
  height: auto !important;
  /* 覆盖可能的固定高度 */
  overflow-y: auto !important;
  /* 内部滚动 */
  background: #ffffff !important;
  /* 强制白底 */
  padding: 15px !important;
  /* 给文字留呼吸空间 */
  position: relative;
  z-index: 1;
}

/* 4. 实际文字区域 */
.xjzl-window prose-mirror .editor-content.ProseMirror {
  min-height: 100%;
  /* 撑满容器 */
  color: #000000 !important;
  /* 强制纯黑文字 */
  font-family: "Noto Serif SC", serif;
  font-size: 1rem;
  line-height: 1.6;
  outline: none;
  /* 去掉蓝色聚焦框 */
  white-space: pre-wrap;
}