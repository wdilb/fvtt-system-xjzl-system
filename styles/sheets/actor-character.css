/* =========================================
   角色卡专用样式 (XJZL System) - 字体修复版
   ========================================= */

/* 1. 窗口与基础 */
.xjzl-window.actor.character {
  /* 只设置中文正文字体，不强制 icon 字体 */
  font-family: "Ma Shan Zheng", "Kaiti", serif;
}

.xjzl-window.actor.character .window-content {
  background: var(--xjzl-paper) !important;
  color: #000000 !important;
}

.xjzl-window.actor.character .window-header {
  /* 标题栏保持默认 sans-serif */
  font-family: sans-serif !important;
  color: #fff;
  background: var(--xjzl-ink-800);
  border-bottom: 2px solid var(--xjzl-gold);
}
.xjzl-window.actor.character .window-title { font-weight: bold; }

/* 【核心修复】不要强制定义 FontAwesome 的 font-family */
/* Foundry 核心会自动处理 .fas, .fa-solid 的字体 */
.xjzl-window i.fas, 
.xjzl-window i.fa-solid {
  /* 确保显示模式正确即可 */
  display: inline-block;
  font-style: normal;
  /* 如果图标依然是方框，尝试强制 font-weight: 900 (Solid 需要) */
  font-weight: 900;
  /* 确保没有被其他字体覆盖 */
  font-family: "Font Awesome 6 Pro", "Font Awesome 6 Free", "FontAwesome" !important;
}

/* 2. Grid 布局 */
.xjzl-grid-2 { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; }
.hidden { display: none !important; }

/* 3. 通用卡片 */
.xjzl-card {
  background: rgba(255, 255, 255, 0.6);
  border: 1px solid #888;
  border-radius: 6px;
  padding: 10px;
  box-shadow: 0 2px 4px rgba(0,0,0,0.15);
  display: flex;
  flex-direction: column;
  color: #000;
}
.xjzl-card-header {
  font-weight: 900;
  font-size: 1.2em;
  color: #000 !important;
  border-bottom: 2px solid var(--xjzl-accent);
  margin-bottom: 8px;
  padding-bottom: 4px;
  text-align: center;
  background: rgba(0,0,0,0.05);
  margin: -10px -10px 8px -10px;
  padding-top: 6px;
  border-radius: 4px 4px 0 0;
}

/* 属性行 */
.xjzl-grid-2 > div {
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-size: 14px;
  font-weight: bold;
  padding: 4px 0;
  border-bottom: 1px solid rgba(0,0,0,0.2);
  color: #222;
}

/* 4. 头部区域 */
.xjzl-header {
  display: flex;
  padding: 10px;
  gap: 15px;
  border-bottom: 2px solid var(--xjzl-ink-500);
  background: rgba(255, 255, 255, 0.3);
  color: var(--xjzl-ink-900);
}
.char-portrait { flex: 0 0 100px; height: 100px; border: 2px solid var(--xjzl-ink-800); border-radius: 4px; object-fit: cover; background: #ccc; }
.header-identity { flex: 1; justify-content: center; gap: 8px; display: flex; flex-direction: column; }
.identity-row { display: flex; align-items: center; gap: 10px; }
.identity-row label { font-weight: bold; width: 60px; text-align: right; color: var(--xjzl-ink-800); }
.header-resources { flex: 0 0 180px; font-size: 0.9em; justify-content: center; display: flex; flex-direction: column; gap: 5px; }
.resource-row { display: flex; justify-content: space-between; align-items: center; }
.resource-inputs { display: flex; align-items: center; gap: 2px; }
.resource-inputs input { width: 40px; height: 20px; text-align: right; border-bottom: 1px solid var(--xjzl-ink-500); background: rgba(255,255,255,0.5); font-weight: bold; }
.resource-bar-bg { height: 6px; background: rgba(0,0,0,0.1); border-radius: 3px; overflow: hidden; border: 1px solid rgba(0,0,0,0.2); }
.resource-bar-fill { height: 100%; transition: width 0.3s ease; }
.resource-bar-fill.hp { background-color: #8b0000; }
.resource-bar-fill.mp { background-color: #2b4c7e; }
.resource-bar-fill.rage { background-color: #c5a059; }

/* =========================================
   5. 内功/武学卡片
   ========================================= */
.neigong-item {
  background: rgba(30, 30, 30, 0.9) !important; 
  border: 1px solid #555;
  border-radius: 6px;
  padding: 8px;
  margin: 0;
  display: flex;
  flex-direction: column;
  gap: 8px;
  box-shadow: 0 4px 6px rgba(0,0,0,0.3);
  color: #e0e0e0 !important;
  min-height: auto;
}
.neigong-item.active {
  border-color: var(--xjzl-gold);
  box-shadow: 0 0 10px rgba(197, 160, 89, 0.3);
  background: rgba(40, 40, 40, 0.95) !important;
}

/* 图标容器 */
.neigong-item a[data-action="editItem"],
.neigong-item .item-icon,
.neigong-item .item-icon-container {
  display: block;
  flex: 0 0 52px !important;
  width: 52px;
  height: 52px;
  position: relative;
  overflow: hidden;
  border-radius: 4px;
  border: 1px solid #666;
  cursor: pointer;
  background: #000;
}
.neigong-item img {
  width: 100% !important;
  height: 100% !important;
  object-fit: cover;
  border: none;
  display: block;
  margin: 0; padding: 0;
}

/* 按钮组 */
.neigong-item .button-group { display: flex; gap: 5px; margin-top: auto; }
.neigong-item button, .move-btn { border-radius: 4px; border: 1px solid #555; font-size: 0.85em; padding: 3px 0; height: 26px; line-height: normal; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 4px; transition: all 0.2s; background: #3a3a3a; color: #ddd; }
.neigong-item button:hover, .move-btn:hover { background: #505050; color: #fff; }
.active-btn { background: var(--xjzl-accent) !important; color: white !important; border-color: transparent; }
.mastered { background: transparent !important; border: 1px solid var(--xjzl-gold) !important; color: var(--xjzl-gold) !important; opacity: 0.8; cursor: default; }
.btn-refund { flex: 0 0 30px; }
.btn-invest { flex: 1; }
.btn-toggle { flex: 2; }

/* 武学头部操作按钮 */
.header-actions .action-btn { width: 24px; height: 24px; display: flex; align-items: center; justify-content: center; color: #ccc; cursor: pointer; border-radius: 4px; border: none; background: transparent; }
.header-actions .action-btn:hover { background: rgba(255,255,255,0.1); color: #fff; }
.header-actions .action-btn.delete:hover { background: rgba(255,0,0,0.2); color: #ff4444; }

/* 子标签栏 */
.xjzl-tab-item[data-action="toggleSubTab"] { border-bottom: 2px solid transparent; color: var(--xjzl-ink-500); background: transparent; }
.xjzl-tab-item[data-action="toggleSubTab"]:hover { background: rgba(0,0,0,0.05); color: var(--xjzl-ink-800); }
.xjzl-tab-item[data-action="toggleSubTab"].active { color: var(--xjzl-accent); border-bottom: 2px solid var(--xjzl-accent); background: transparent; font-weight: 900; }
/* === 强制修复：剩余自由点数标题颜色 === */
.free-points-header {
  /* 这里设置你想要的颜色 */
  /* #8b0000 是深红，#000000 是纯黑 */
  color: #8b0000 !important; 
  
  font-weight: 900 !important;
  border: none !important;
  text-shadow: none !important; /* 去掉可能存在的文字阴影 */
}