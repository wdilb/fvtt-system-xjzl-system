[
    {
        "name": "ğŸ² [æ‰è½] ç‰©å“å®ç›’",
        "type": "script",
        "img": "icons/svg/item-bag.svg",
        "command": "/**\n * å®: éšæœºç‰©å“ (æ’é™¤æ­¦å­¦/å†…åŠŸ)\n * é€»è¾‘: è‡ªåŠ¨è¿‡æ»¤ç©ºåˆ†ç±»ï¼Œç¡®ä¿å¿…å‡ºç‰©å“\n */\nconst browser = game.xjzl.compendiumBrowser;\nif (!browser.isLoaded) await browser.loadData();\n\n// === âš™ï¸ é…ç½®åŒºåŸŸ (å¯ä¿®æ”¹æƒé‡) ===\nconst config = {\n    amount: 1,\n    weighted: true,\n    alias: \"ç‰©å“å®ç›’\",\n    title: \"éšæœºå®ç‰©\",\n    \n    // è‡ªå®šä¹‰æƒé‡ (0:å‡¡, 1:é“œ, 2:é“¶, 3:é‡‘, 4:ç‰)\n    // æ•°å€¼è¶Šå¤§ï¼Œæ‰ç‡è¶Šé«˜ã€‚è®¾ä¸º 0 å³ä¸æ‰è½ã€‚\n    customWeights: {\n        0: 100, \n        1: 60,  \n        2: 30,  \n        3: 10,  \n        4: 2    \n    }\n};\n// =================================\n\n// 1. å®šä¹‰å€™é€‰åˆ†ç±»\nconst candidates = [\"weapon\", \"armor\", \"consumable\", \"misc\", \"qizhen\", \"art_book\"];\n\n// 2. è¿‡æ»¤æ‰æ²¡æœ‰æ•°æ®çš„åˆ†ç±»\nconst validTabs = candidates.filter(t => browser.cachedData[t] && browser.cachedData[t].length > 0);\n\nif (validTabs.length === 0) return ui.notifications.warn(\"å½“å‰ä¸–ç•Œä¸­æ²¡æœ‰å¯ç”¨çš„ç‰©å“æ•°æ®ï¼\");\n\n// 3. éšæœºé€‰ä¸€ä¸ªåˆ†ç±»\nconst randomTab = validTabs[Math.floor(Math.random() * validTabs.length)];\n\n// 4. æŠ½å– (ä¼ å…¥è‡ªå®šä¹‰æƒé‡)\nconst items = await browser.randomize({\n    tab: randomTab,\n    amount: config.amount,\n    weighted: config.weighted,\n    customWeights: config.customWeights\n});\n\n// 5. å‘é€å¡ç‰‡\nif (items.length > 0) {\n    let finalTitle = config.title;\n    if (randomTab === \"weapon\") finalTitle = \"ç¥å…µåˆ©å™¨\";\n    if (randomTab === \"qizhen\") finalTitle = \"ç¨€ä¸–å¥‡ç\";\n    \n    browser._generateLootChatCard(items, { \n        alias: config.alias,\n        title: finalTitle\n    });\n}"
    },
    {
        "name": "ğŸ“– [æ‰è½] æ­¦å­¦å®ç›’",
        "type": "script",
        "img": "icons/svg/book.svg",
        "command": "/**\n * å®: éšæœºç§˜ç±\n * é€»è¾‘: åœ¨æ­¦å­¦å’Œå†…åŠŸä¸­éšæœº\n */\nconst browser = game.xjzl.compendiumBrowser;\nif (!browser.isLoaded) await browser.loadData();\n\n// === âš™ï¸ é…ç½®åŒºåŸŸ (å¯ä¿®æ”¹æƒé‡) ===\nconst config = {\n    amount: 1,\n    weighted: true,\n    alias: \"æ­¦å­¦å®ç›’\",\n    title: \"éšæœºç§˜ç±\",\n\n    // è‡ªå®šä¹‰æƒé‡ (1:äººçº§, 2:åœ°çº§, 3:å¤©çº§)\n    // ä¾‹å¦‚ï¼šæƒ³å¿…å‡ºå¤©çº§ï¼Œå¯æ”¹ä¸º {1:0, 2:0, 3:100}\n    customWeights: {\n        1: 100, \n        2: 20,  \n        3: 5    \n    }\n};\n// =================================\n\n// 1. å®šä¹‰å€™é€‰åˆ†ç±»\nconst candidates = [\"wuxue\", \"neigong\"];\n\n// 2. è¿‡æ»¤æ‰æ²¡æœ‰æ•°æ®çš„åˆ†ç±»\nconst validTabs = candidates.filter(t => browser.cachedData[t] && browser.cachedData[t].length > 0);\n\nif (validTabs.length === 0) return ui.notifications.warn(\"å½“å‰ä¸–ç•Œä¸­æ²¡æœ‰å½•å…¥ä»»ä½•æ­¦å­¦æˆ–å†…åŠŸï¼\");\n\n// 3. éšæœºé€‰ä¸€ä¸ª\nconst randomTab = validTabs[Math.floor(Math.random() * validTabs.length)];\n\n// 4. æŠ½å– (ä¼ å…¥è‡ªå®šä¹‰æƒé‡)\nconst items = await browser.randomize({\n    tab: randomTab,\n    amount: config.amount,\n    weighted: config.weighted,\n    customWeights: config.customWeights\n});\n\n// 5. å‘é€å¡ç‰‡\nif (items.length > 0) {\n    browser._generateLootChatCard(items, { \n        alias: config.alias,\n        title: randomTab === \"neigong\" ? \"å†…åŠŸå¿ƒæ³•\" : \"æ­¦å­¦æ‹›å¼\"\n    });\n}"
    },
    {
        "name": "ğŸ² [æ‰è½] æ±Ÿæ¹–å®ç›’",
        "type": "script",
        "img": "icons/svg/d20-grey.svg",
        "command": "/**\n * å®: å…¨æ± éšæœº\n * é€»è¾‘: åŒ…å«æ‰€æœ‰ç±»å‹ï¼Œæ ¹æ®éšæœºåˆ°çš„ç±»å‹è‡ªåŠ¨åº”ç”¨å¯¹åº”çš„æƒé‡é…ç½®\n */\nconst browser = game.xjzl.compendiumBrowser;\nif (!browser.isLoaded) await browser.loadData();\n\n// === âš™ï¸ é…ç½®åŒºåŸŸ (å¯ä¿®æ”¹æƒé‡) ===\nconst config = {\n    amount: 1,\n    weighted: true,\n    alias: \"æ±Ÿæ¹–å¥‡é‡\",\n    title: \"éšæœºå®ç‰©\",\n\n    // æ–¹æ¡ˆA: ç‰©å“æƒé‡ (0-4: å‡¡,é“œ,é“¶,é‡‘,ç‰)\n    qualityWeights: { 0: 100, 1: 60, 2: 30, 3: 10, 4: 2 },\n\n    // æ–¹æ¡ˆB: æ­¦å­¦æƒé‡ (1-3: äºº,åœ°,å¤©)\n    tierWeights: { 1: 100, 2: 20, 3: 5 }\n};\n// =================================\n\n// 1. å®šä¹‰å…¨éƒ¨åˆ†ç±»\nconst candidates = [\"weapon\", \"armor\", \"consumable\", \"misc\", \"qizhen\", \"art_book\", \"wuxue\", \"neigong\"];\n\n// 2. è¿‡æ»¤ç©ºåˆ†ç±»\nconst validTabs = candidates.filter(t => browser.cachedData[t] && browser.cachedData[t].length > 0);\n\nif (validTabs.length === 0) return ui.notifications.warn(\"å½“å‰ä¸–ç•Œä¸€ç‰‡è’èŠœï¼Œæ²¡æœ‰ä»»ä½•ç‰©å“æ•°æ®ï¼\");\n\n// 3. éšæœºé€‰ä¸€ä¸ªåˆ†ç±»\nconst randomTab = validTabs[Math.floor(Math.random() * validTabs.length)];\n\n// 4. åˆ¤æ–­ä½¿ç”¨å“ªå¥—æƒé‡\nlet selectedWeights = config.qualityWeights;\nif ([\"wuxue\", \"neigong\"].includes(randomTab)) {\n    selectedWeights = config.tierWeights;\n}\n\n// 5. æŠ½å–\nconst items = await browser.randomize({\n    tab: randomTab,\n    amount: config.amount,\n    weighted: config.weighted,\n    customWeights: selectedWeights // ä¼ å…¥åŠ¨æ€é€‰æ‹©çš„æƒé‡\n});\n\n// 6. å‘é€\nif (items.length > 0) {\n    // åŠ¨æ€æ ‡é¢˜\n    let finalTitle = config.title;\n    if ([\"wuxue\", \"neigong\"].includes(randomTab)) finalTitle = \"æ­¦æ—ç§˜ç±\";\n    else if ([\"weapon\", \"armor\"].includes(randomTab)) finalTitle = \"ç¥å…µå®ç”²\";\n    else if (randomTab === \"consumable\") finalTitle = \"çµä¸¹å¦™è¯\";\n    \n    browser._generateLootChatCard(items, { \n        alias: config.alias,\n        title: finalTitle\n    });\n}"
    },
    {
        "name": "ğŸ“– [æ‰è½] æ­¦å­¦å®ç›’ï¼ˆæ±Ÿæ¹–åŠ¿åŠ›ï¼‰",
        "type": "script",
        "img": "icons/svg/book.svg",
        "command": "/**\n * å®: éšæœºæ±Ÿæ¹–æ­¦å­¦\n * é€»è¾‘: ä»…æŠ½å–é—¨æ´¾ä¸º 'jianghushili' çš„æ­¦å­¦æˆ–å†…åŠŸ\n */\nconst browser = game.xjzl.compendiumBrowser;\nif (!browser.isLoaded) await browser.loadData();\n\n// === âš™ï¸ é…ç½®åŒºåŸŸ ===\nconst config = {\n    amount: 1,\n    weighted: true,\n    alias: \"æ­¦å­¦å®ç›’\",\n    title: \"éšæœºç§˜ç±\",\n    targetSect: \"jianghushili\",  // æƒé‡ (1:äºº, 2:åœ°, 3:å¤©)\n    customWeights: { 1: 100, 2: 20, 3: 5 }\n};\n// ==================\n\n// 1. å€™é€‰åˆ†ç±»\nconst candidates = [\"wuxue\", \"neigong\"];\nconst validTabs = candidates.filter(t => browser.cachedData[t] && browser.cachedData[t].length > 0);\n\nif (validTabs.length === 0) return ui.notifications.warn(\"æ•°æ®æœªåŠ è½½æˆ–ä¸ºç©ºï¼\");\n\n// 2. éšæœºåˆ†ç±»\nconst randomTab = validTabs[Math.floor(Math.random() * validTabs.length)];\n\n// 3. æŠ½å– (å¸¦è¿‡æ»¤å™¨)\nconst items = await browser.randomize({\n    tab: randomTab,\n    amount: config.amount,\n    weighted: config.weighted,\n    customWeights: config.customWeights,\n    // å¼ºåˆ¶æŒ‡å®šç­›é€‰æ¡ä»¶\n    filters: {\n        sect: new Set([config.targetSect])\n    }\n});\n\n// 4. å‘é€\nif (items.length > 0) {\n    browser._generateLootChatCard(items, { \n        alias: config.alias,\n        title: randomTab === \"neigong\" ? \"æ±Ÿæ¹–å¿ƒæ³•\" : \"æ±Ÿæ¹–æ‹›å¼\"\n    });\n} else {\n    ui.notifications.warn(`æœªæ‰¾åˆ°å±äº [${config.targetSect}] çš„ç§˜ç±ï¼Œè¯·æ£€æŸ¥å®å†…çš„ targetSect é…ç½®æ˜¯å¦æ­£ç¡®ã€‚`);\n}"
    }
]