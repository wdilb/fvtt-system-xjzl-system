<div class="xjzl-dt-root">

    <!-- Header: 类型与来源 -->
    <div class="xjzl-dt-header-grid">
        <div class="xjzl-dt-field">
            <label class="xjzl-dt-label">
                <i class="fas fa-biohazard"></i> {{localize "XJZL.UI.DamageTool.Type"}}
            </label>
            <select name="type" class="xjzl-dt-select">
                {{#each damageTypes as |label key|}}
                <option value="{{key}}" {{#if (eq key ../defaultType)}}selected{{/if}}>{{label}}</option>
                {{/each}}
            </select>
        </div>

        <div class="xjzl-dt-field">
            <label class="xjzl-dt-label">
                <i class="fas fa-comment-alt"></i> {{localize "XJZL.UI.DamageTool.Source"}}
            </label>
            <input type="text" name="reason" value="{{defaultReason}}"
                placeholder="{{localize 'XJZL.UI.DamageTool.SourcePlaceholder'}}" class="xjzl-dt-input-text" />
        </div>
    </div>

    <!-- Main Number: 伤害数值 -->
    <div class="xjzl-dt-amount-box">
        <label class="xjzl-dt-label">{{localize "XJZL.UI.DamageTool.AmountLabel"}}</label>
        <input type="number" name="amount" value="10" min="1" step="1" class="xjzl-dt-input-large" />
    </div>

    <!-- Options: 开关 -->
    <div class="xjzl-dt-options-grid">
        <!-- 无视防御 -->
        <label class="xjzl-dt-checkbox-row">
            <input type="checkbox" name="ignoreDefense" class="xjzl-dt-checkbox">
            <span>{{localize "XJZL.UI.DamageTool.IgnoreDefense"}} <span class="xjzl-dt-hint">{{localize
                    "XJZL.UI.DamageTool.TrueDamageHint"}}</span></span>
        </label>

        <!-- 无视格挡 -->
        <label class="xjzl-dt-checkbox-row">
            <input type="checkbox" name="ignoreBlock" class="xjzl-dt-checkbox">
            <span>{{localize "XJZL.UI.DamageTool.IgnoreBlock"}}</span>
        </label>

        <!-- 无视架招 (新增) -->
        <label class="xjzl-dt-checkbox-row">
            <input type="checkbox" name="ignoreStance" class="xjzl-dt-checkbox">
            <span>{{localize "XJZL.UI.DamageTool.IgnoreStance"}} <span class="xjzl-dt-hint">{{localize
                    "XJZL.UI.DamageTool.BreakStanceHint"}}</span></span>
        </label>

        <!-- 是否为招式 (新增) -->
        <label class="xjzl-dt-checkbox-row">
            <input type="checkbox" name="isSkill" class="xjzl-dt-checkbox" checked> {{!-- 默认勾选，因为 GM 手动造成伤害通常是某种技能 --}}
            <span>{{localize "XJZL.UI.DamageTool.IsSkill"}} <span class="xjzl-dt-hint">{{localize
                    "XJZL.UI.DamageTool.SkillResHint"}}</span></span>
        </label>

        <!-- 触发暴击特效 (原 Force Crit) -->
        <label class="xjzl-dt-checkbox-row">
            <input type="checkbox" name="isCrit" class="xjzl-dt-checkbox">
            <span>{{localize "XJZL.UI.DamageTool.IsCrit"}}</span>
        </label>

        <!-- 应用暴击伤害 (新增) -->
        <label class="xjzl-dt-checkbox-row">
            <input type="checkbox" name="applyCritDamage" class="xjzl-dt-checkbox" checked>
            <span>{{localize "XJZL.UI.DamageTool.ApplyCritDamage"}} <span class="xjzl-dt-hint">{{localize
                    "XJZL.UI.DamageTool.CritDmgHint"}}</span></span>
        </label>
    </div>

    <!-- Footer -->
    <button type="button" data-action="apply" class="xjzl-dt-btn">
        <i class="fas fa-skull-crossbones"></i>
        <span>{{localize "XJZL.UI.DamageTool.ApplyBtn"}}</span>
    </button>

    <p class="xjzl-dt-note">
        {{localize "XJZL.UI.DamageTool.TargetNote"}}
    </p>
</div>