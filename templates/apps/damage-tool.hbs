<!-- 
  xjzl-window: 系统通用窗口样式
  p-3: 内边距
  text-slate-800: 深色文字 (适配浅色背景)
-->
<div class="xjzl-window-content p-3 text-sm space-y-4">
    
    <!-- Header Area: 伤害来源与类型 -->
    <div class="grid grid-cols-2 gap-3">
        <!-- 左侧: 伤害类型 -->
        <div class="flex flex-col gap-1">
            <label class="font-bold text-gray-700">
                <i class="fas fa-biohazard mr-1"></i> 类型
            </label>
            <select name="type" class="w-full p-1 border rounded bg-white focus:ring-2 focus:ring-red-500">
                {{#each damageTypes as |label key|}}
                    <option value="{{key}}" {{#if (eq key ../defaultType)}}selected{{/if}}>{{label}}</option>
                {{/each}}
            </select>
        </div>

        <!-- 右侧: 伤害来源说明 -->
        <div class="flex flex-col gap-1">
            <label class="font-bold text-gray-700">
                <i class="fas fa-comment-alt mr-1"></i> 来源/描述
            </label>
            <input type="text" name="reason" value="{{defaultReason}}" 
                   placeholder="如: 陷阱, 坠落..."
                   class="w-full p-1 border rounded bg-white text-center focus:ring-2 focus:ring-red-500"/>
        </div>
    </div>

    <hr class="border-gray-300"/>

    <!-- Main Number: 巨大的伤害数值输入 -->
    <div class="flex flex-col items-center justify-center bg-gray-100 rounded p-2 border border-gray-300">
        <label class="text-xs font-bold text-gray-500 uppercase tracking-wider mb-1">DAMAGE AMOUNT</label>
        <div class="flex items-center gap-2 w-full justify-center">
            <i class="fas fa-minus text-gray-400 cursor-pointer hover:text-red-600" onclick="this.nextElementSibling.stepDown(5)"></i>
            <input type="number" name="amount" value="10" min="1" step="1"
                   class="w-32 text-center text-4xl font-bold font-mono bg-transparent border-b-2 border-gray-400 focus:border-red-600 focus:outline-none text-red-700 placeholder-red-200"/>
            <i class="fas fa-plus text-gray-400 cursor-pointer hover:text-red-600" onclick="this.previousElementSibling.stepUp(5)"></i>
        </div>
    </div>

    <!-- Toggles: 选项开关 (Grid 布局) -->
    <div class="grid grid-cols-2 gap-2 bg-white/50 p-2 rounded">
        <label class="flex items-center gap-2 cursor-pointer select-none hover:bg-gray-100 p-1 rounded transition">
            <input type="checkbox" name="ignoreDefense" class="accent-red-600 w-4 h-4">
            <span>无视防御 <span class="text-xs text-gray-400">(真伤)</span></span>
        </label>
        
        <label class="flex items-center gap-2 cursor-pointer select-none hover:bg-gray-100 p-1 rounded transition">
            <input type="checkbox" name="ignoreBlock" class="accent-red-600 w-4 h-4">
            <span>无视格挡 <span class="text-xs text-gray-400">(破防)</span></span>
        </label>

        <label class="flex items-center gap-2 cursor-pointer select-none hover:bg-gray-100 p-1 rounded transition">
            <input type="checkbox" name="isCrit" class="accent-orange-500 w-4 h-4">
            <span>强制暴击 <span class="text-xs text-gray-400">(x2)</span></span>
        </label>

        <label class="flex items-center gap-2 cursor-pointer select-none hover:bg-gray-100 p-1 rounded transition">
            <input type="checkbox" name="forceHit" checked class="accent-green-600 w-4 h-4">
            <span>强制命中 <span class="text-xs text-gray-400">(必中)</span></span>
        </label>
    </div>

    <!-- Action Button -->
    <button type="button" data-action="apply" 
            class="w-full bg-gradient-to-r from-red-700 to-red-600 hover:from-red-600 hover:to-red-500 text-white font-bold py-3 rounded shadow-md transform active:scale-95 transition flex items-center justify-center gap-2 text-lg">
        <i class="fas fa-skull-crossbones"></i>
        <span>施加伤害</span>
    </button>
    
    <p class="text-center text-xs text-gray-400 mt-1">
        * 将对所有选中的 Token 生效
    </p>
</div>