<div class="xjzl-effect-picker">

    {{!-- 搜索栏 --}}
    <div class="picker-search">
        <i class="fas fa-search"></i>
        <input type="text" name="filter" placeholder="搜索状态、来源..." autocomplete="off">
    </div>

    <div class="picker-scroll">
        {{!-- 1. 通用状态 --}}
        <div class="section-header">通用状态 (Universal)</div>
        <div class="effect-grid">
            {{#each statusEffects}}
            <button type="button" class="effect-btn" data-action="applyStatus" data-slug="{{this.id}}"
                data-tooltip="{{this.richTooltip}}" data-tooltip-class="xjzl-tooltip">
                <img src="{{this.img}}" />
                <span class="effect-name">{{this.name}}</span>
            </button>
            {{/each}}
        </div>

        {{!-- 2. 场景特效 (按 Actor 分组) --}}
        {{#if sceneGroups.length}}
        <div class="section-header">场景特效 (Scene Context)</div>

        {{#each sceneGroups}}
        <div class="actor-group">
            {{!-- 分组标题保持不变 --}}
            <div class="group-title">
                <i class="fas fa-user"></i> {{this.actorName}}
            </div>

            {{!-- 【修改点】这里改用 effect-grid，结构与上面完全一致 --}}
            <div class="effect-grid" style="padding: 5px;">
                {{#each this.effects}}
                <button type="button" class="effect-btn" data-action="applyItemEffect" data-uuid="{{this.uuid}}"
                    data-tooltip="{{this.richTooltip}}">
                    <img src="{{this.img}}" />
                    <span class="effect-name">{{this.name}}</span>
                </button>
                {{/each}}
            </div>
        </div>
        {{/each}}

        {{else}}
        <div style="text-align: center; color: #999; margin-top: 20px;">
            当前场景无可用特效
        </div>
        {{/if}}
    </div>
</div>