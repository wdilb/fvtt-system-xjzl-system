<div class="xjzl-chat-card request-card">

    {{!-- 1. 头部信息 --}}
    <header class="card-header"
        style="border-bottom: 2px solid var(--xjzl-gold); padding-bottom: 5px; margin-bottom: 10px; display: flex; align-items: center; gap: 10px;">

        {{!-- 目标头像 --}}
        <img src="{{targetImg}}" width="40" height="40"
            style="flex: 0 0 40px; border:1px solid #333; background:#000; border-radius: 4px; object-fit: cover;" />

        <div style="flex: 1;">
            <h3 style="margin: 0; font-weight: 900; border: none; color: #8b0000; font-size: 1.2em;">
                {{localize "XJZL.UI.Chat.RequestSave.Title"}}
            </h3>
            <div style="font-size: 0.8em; color: #555;">
                <span style="background: #27ae60; color: #fff; padding: 0 4px; border-radius: 2px;">
                    {{localize "XJZL.UI.Chat.RequestSave.Subtitle"}}
                </span>
                - {{targetName}}
            </div>
        </div>
    </header>

    {{!-- 2. 描述区域 --}}
    <div class="card-description"
        style="font-style: italic; font-size: 0.9em; color: #444; margin-bottom: 10px; padding: 5px; background: rgba(0,0,0,0.03); border-radius: 4px;">
        <p style="margin:0;">
            {{{localize "XJZL.UI.Chat.RequestSave.Description" attacker=attackerName defender=targetName attr=attrLabel}}}
        </p>
    </div>

    {{!-- 3. 数值展示 (DC) --}}
    <div class="card-stats"
        style="display: flex; justify-content: space-around; align-items: center; margin-bottom: 15px; background: #fff; border: 1px dashed #ccc; padding: 10px; border-radius: 4px;">

        <div style="text-align: center;">
            <div style="font-size: 0.8em; color: #666;">
                {{localize "XJZL.UI.Chat.RequestSave.DC"}}
            </div>
            <div style="font-size: 2em; font-weight: 900; color: #c0392b; line-height: 1;">
                {{dc}}
            </div>
            <div style="font-size: 0.7em; color: #888; margin-top:2px;">
                {{attrLabel}} vs DC
            </div>
        </div>
    </div>

    {{!-- 4. 按钮区域 --}}
    <div class="card-buttons" style="display: flex; flex-direction: column; gap: 5px;">
        {{!-- 这里的 data-action="rollSave" 是核心，ChatManager 会监听它 --}}
        <button data-action="rollSave" 
                style="background: #27ae60; color: white;">
            <i class="fas fa-dice"></i> {{localize "XJZL.UI.Chat.RequestSave.RollBtn" attr=attrLabel}}
        </button>
    </div>
</div>